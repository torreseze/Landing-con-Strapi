# Gu√≠a de Configuraci√≥n de Strapi para Landing Pages

Esta gu√≠a te ayudar√° a configurar Strapi desde cero para trabajar con los componentes de landing page creados en Next.js.

## üöÄ Instalaci√≥n de Strapi

### 1. Crear nuevo proyecto Strapi

```bash
# Crear nuevo proyecto Strapi (en carpeta separada)
npx create-strapi-app@latest my-landing-strapi --quickstart

# O si prefieres con una base de datos espec√≠fica
npx create-strapi-app@latest my-landing-strapi --dbclient=postgres
```

### 2. Iniciar Strapi

```bash
cd my-landing-strapi
npm run develop
```

Tu Strapi estar√° disponible en: `http://localhost:1337`

### 3. Crear usuario administrador

1. Ve a `http://localhost:1337/admin`
2. Completa el formulario para crear tu cuenta de administrador
3. Inicia sesi√≥n en el panel de administraci√≥n

## üìã Configuraci√≥n de Content Types

### 1. Crear Componentes Base

Antes de crear los Content Types, necesitamos crear los componentes reutilizables.

#### A. CTA Button Component

1. Ve a **Content-Type Builder** ‚Üí **Components** ‚Üí **Create new component**
2. **Categor√≠a**: `ui`
3. **Nombre**: `cta-button`
4. **Campos**:
   ```
   - ctaButtonId (Text, Required, Unique)
   - label (Text, Required)
   - href (Text, Required)
   - variant (Enumeration):
     * default
     * outline
     * ghost
   ```

#### B. Dropdown Item Component

1. **Categor√≠a**: `ui`
2. **Nombre**: `dropdown-item`
3. **Campos**:
   ```
   - dropdownItemId (Text, Required, Unique)
   - title (Text, Required)
   - description (Text, Long text, Required)
   - href (Text, Required)
   - icon (Text) // Nombre del √≠cono (ej: "LayoutGrid", "BarChart")
   ```

#### C. Dropdown Category Component

1. **Categor√≠a**: `ui`
2. **Nombre**: `dropdown-category`
3. **Campos**:
   ```
   - categoryId (Text, Required, Unique)
   - title (Text, Required)
   - items (Component, ui.dropdown-item, Repeatable, Required)
   ```

#### D. Dropdown Footer Action Component

1. **Categor√≠a**: `ui`
2. **Nombre**: `dropdown-footer-action`
3. **Campos**:
   ```
   - footerActionId (Text, Required, Unique)
   - label (Text, Required)
   - href (Text, Required)
   - icon (Text) // Nombre del √≠cono opcional
   ```

#### E. Nav Item Component  

1. **Categor√≠a**: `ui`
2. **Nombre**: `nav-item`
3. **Campos**:
   ```
   - navItemId (Text, Required, Unique)
   - label (Text, Required)
   - href (Text) // Opcional porque puede ser dropdown
   - hasDropdown (Boolean, default: false)
   - dropdownCategories (Component, ui.dropdown-category, Repeatable)
   - dropdownFooterActions (Component, ui.dropdown-footer-action, Repeatable)
   ```

#### F. SEO Config Component

1. **Categor√≠a**: `seo`
2. **Nombre**: `seo-config`
3. **Campos**:
   ```
   - title (Text)
   - description (Text, Long text)
   - keywords (Text)
   - canonical (Text)
   - noIndex (Boolean, default: false)
   ```

### 2. Crear Dynamic Zone Components

#### A. Navbar Component

1. **Categor√≠a**: `layout`
2. **Nombre**: `navbar`
3. **Campos**:
   ```
   - logo (Media, Single, Required)
   - logoAlt (Text, default: "DUX Software")
   - logoHref (Text, default: "/")
   - logoWidth (Number, default: 120)
   - logoHeight (Number, default: 40)
   - navItems (Component, ui.nav-item, Repeatable)
   - ctaButtons (Component, ui.cta-button, Repeatable, Required) // Cambi√≥ a plural
   - backgroundColor (Enumeration):
     * transparent
     * white
     * blue
   ```

**‚ö†Ô∏è Importante para Navbar**:
- Los **navItems** ahora soportan dropdowns con categor√≠as e items anidados
- **ctaButtons** cambi√≥ de singular a plural para soportar m√∫ltiples botones
- Los dropdowns se renderizan como mega men√∫s de 3 columnas en desktop
- En m√≥vil los dropdowns se simplifican como listas anidadas

#### B. Hero Section Component

1. **Categor√≠a**: `sections`
2. **Nombre**: `hero`
3. **Campos**:
   ```
   - title (Text, Required)
   - subtitle (Text)
   - description (Text, Long text)
   - ctaButtons (Component, ui.cta-button, Repeatable)
   - backgroundImage (Media, Single)
   - backgroundColor (Enumeration):
     * white
     * blue
     * gradient
   - textAlignment (Enumeration):
     * left
     * center
     * right
   - containerSize (Enumeration):
     * sm
     * md
     * lg
     * xl
     * full
   - bottomImage (Media, Single)
   - bottomImageAlt (Text)
   - seoConfig (Component, seo.seo-config)
   ```

#### C. Content Section Component

1. **Categor√≠a**: `sections`
2. **Nombre**: `content`
3. **Campos**:
   ```
   - title (Text, Required)
   - content (Rich text, Required)
   - image (Media, Single)
   - imagePosition (Enumeration):
     * left
     * right
   - ctaButton (Component, ui.cta-button)
   - backgroundColor (Enumeration):
     * white
     * gray
     * blue
   - containerSize (Enumeration):
     * sm
     * md
     * lg
     * xl
   - seoHeadingLevel (Enumeration):
     * h1
     * h2
     * h3
     * h4
   ```

### 3. Crear Collection Type: Landing Page

1. Ve a **Content-Type Builder** ‚Üí **Collection Types** ‚Üí **Create new collection type**
2. **Nombre**: `landing-page`
3. **Campos**:
   ```
   - title (Text, Required)
   - slug (UID, Required, attached to: title)
   - metaTitle (Text)
   - metaDescription (Text, Long text)
   - ogImage (Media, Single)
   - dynamicZone (Dynamic Zone, Required)
     * Componentes disponibles:
       - layout.navbar
       - sections.hero  
       - sections.content
   - publishedAt (DateTime, default: now)
   ```

## üîê Configuraci√≥n de Permisos

### 1. Configurar API Tokens

1. Ve a **Settings** ‚Üí **API Tokens** ‚Üí **Create new API Token**
2. **Nombre**: `Landing Pages API`
3. **Descripci√≥n**: `Token para acceso a landing pages`
4. **Token type**: `Read-only` (recomendado para producci√≥n)
5. **Duraci√≥n**: `Unlimited`
6. Copia el token generado para tu `.env.local`

### 2. Configurar permisos p√∫blicos

1. Ve a **Settings** ‚Üí **Users & Permissions Plugin** ‚Üí **Roles** ‚Üí **Public**
2. **Landing-page**:
   - ‚úÖ `find`
   - ‚úÖ `findOne`
3. **Upload**:
   - ‚úÖ `find`
   - ‚úÖ `findOne`
4. Guarda los cambios

## üìù Crear Contenido de Ejemplo

### 1. Crear Landing Page Principal

1. Ve a **Content Manager** ‚Üí **Landing Page** ‚Üí **Create new entry**
2. **T√≠tulo**: `P√°gina Principal`
3. **Slug**: `home`
4. **Meta Title**: `DUX Software - Desarrollo de Software a Medida`
5. **Meta Description**: `Empresa l√≠der en desarrollo de software personalizado. Creamos aplicaciones web, m√≥viles y sistemas empresariales.`

### 2. Configurar Dynamic Zone

#### A. Agregar Navbar con Dropdown
```json
Component: layout.navbar
- logo: [Subir la imagen duxlogo.png desde Media Library]
- logoAlt: "DUX Software"
- logoHref: "/"
- logoWidth: 120
- logoHeight: 40
- navItems:
  * Nav Item 1 (Con Dropdown):
    - navItemId: "platform"
    - label: "Plataforma"
    - hasDropdown: true
    - dropdownCategories:
      * Categor√≠a 1:
        - categoryId: "capabilities"
        - title: "CAPABILITIES"
        - items:
          ‚Ä¢ { dropdownItemId: "create-apis", title: "Crear APIs", description: "Dise√±a APIs REST y GraphQL para cualquier frontend.", href: "/platform/create-apis", icon: "LayoutGrid" }
          ‚Ä¢ { dropdownItemId: "customization", title: "Personalizaci√≥n", description: "Personaliza tu CMS para cumplir los requisitos de tu proyecto.", href: "/platform/customization", icon: "BarChart" }
          ‚Ä¢ { dropdownItemId: "hosting", title: "Hosting", description: "Aloja tus proyectos en robustas y seguras infraestructuras.", href: "/platform/hosting", icon: "Cloud" }
      * Categor√≠a 2:
        - categoryId: "management"
        - title: "GESTI√ìN Y COLABORACI√ìN"
        - items:
          ‚Ä¢ { dropdownItemId: "content-management", title: "Gesti√≥n de Contenido", description: "Crea, edita y publica contenido f√°cilmente.", href: "/platform/content-management", icon: "BookOpen" }
          ‚Ä¢ { dropdownItemId: "collaboration", title: "Colaboraci√≥n", description: "Trabaja en equipo de forma sencilla en c√≥digo y contenido.", href: "/platform/collaboration", icon: "Users" }
          ‚Ä¢ { dropdownItemId: "security", title: "Seguridad", description: "Implementa medidas de seguridad robustas para proteger tu informaci√≥n.", href: "/platform/security", icon: "LifeBuoy" }
      * Categor√≠a 3:
        - categoryId: "product"
        - title: "PRODUCTO Y CARACTER√çSTICAS"
        - items:
          ‚Ä¢ { dropdownItemId: "cloud", title: "Cloud", description: "Hosting PaaS para proyectos Dux.", href: "/product/cloud", icon: "Cloud" }
          ‚Ä¢ { dropdownItemId: "enterprise", title: "Edici√≥n Empresarial", description: "Una edici√≥n lista para empresas.", href: "/product/enterprise", icon: "Building" }
          ‚Ä¢ { dropdownItemId: "market", title: "Dux Market", description: "Mercado de plugins e integraciones.", href: "/product/market", icon: "ShoppingCart" }
    - dropdownFooterActions:
      ‚Ä¢ { footerActionId: "contact-sales", label: "Contactar Ventas", href: "/contact", icon: "Phone" }
      ‚Ä¢ { footerActionId: "demo", label: "Demo Interactivo", href: "/interactive-demo", icon: "PlayCircle" }
      ‚Ä¢ { footerActionId: "host-project", label: "Alojar tu Proyecto", href: "/host-project", icon: "Cloud" }
  * Nav Item 2 (Simple): { navItemId: "solutions", label: "Soluciones", href: "/solutions" }
  * Nav Item 3 (Simple): { navItemId: "resources", label: "Recursos", href: "/resources" }
  * Nav Item 4 (Simple): { navItemId: "prices", label: "Precios", href: "/pricing" }
- ctaButtons:
  * { ctaButtonId: "login", label: "Login", href: "/login", variant: "ghost" }
  * { ctaButtonId: "register", label: "Registrarse", href: "/register", variant: "outline" }
  * { ctaButtonId: "demo", label: "Ver Demo", href: "/demo", variant: "default" }
- backgroundColor: "white"
```

**üí° Iconos disponibles (Lucide React)**:

üéâ **¬°TODOS los iconos de [Lucide React](https://lucide.dev/icons) est√°n disponibles!** 

**‚ú® Sistema din√°mico**: Ya no necesitas importar iconos manualmente. Simplemente usa el nombre exacto del √≠cono de Lucide.

**üì¶ Dependencia requerida**:
```bash
npm install lucide-react
```

**üîß C√≥mo usar cualquier √≠cono**:
1. Ve a [Lucide.dev](https://lucide.dev/icons) 
2. Busca el √≠cono que quieres (ej: `Calendar`, `Settings`, `Mail`)
3. √ösalo directamente en Strapi con el nombre exacto:

```json
{
  "dropdownItemId": "calendar",
  "title": "Calendario", 
  "description": "Gestiona eventos",
  "href": "/calendar",
  "icon": "Calendar"  // ‚Üê Cualquier √≠cono de Lucide
}
```

**‚úÖ Ejemplos de iconos populares**:
| √çcono | Nombre | Categor√≠a |
|-------|---------|-----------|
| üìä | `BarChart` | Analytics |
| üë• | `Users` | Colaboraci√≥n |
| üìñ | `BookOpen` | Documentaci√≥n |
| ‚òÅÔ∏è | `Cloud` | Cloud/Hosting |
| üè¢ | `Building` | Empresarial |
| üõí | `ShoppingCart` | E-commerce |
| üìû | `Phone` | Contacto |
| ‚öôÔ∏è | `Settings` | Configuraci√≥n |
| üìß | `Mail` | Comunicaci√≥n |
| üìÖ | `Calendar` | Fechas/Tiempo |
| üéØ | `Target` | Objetivos |
| üöÄ | `Rocket` | Lanzamiento |

**‚ö†Ô∏è Importante**: 
- Los nombres son **case-sensitive**: `Calendar` ‚úÖ, `calendar` ‚ùå
- Si un √≠cono no existe, se mostrar√° un √≠cono de ayuda (HelpCircle) autom√°ticamente
- Consulta [lucide.dev](https://lucide.dev/icons) para ver la lista completa actualizada

#### B. Agregar Hero Section
```json
Component: sections.hero
- title: "Desarrollamos Software que Impulsa tu Negocio"
- subtitle: "Soluciones tecnol√≥gicas a medida"
- description: "Creamos aplicaciones web, m√≥viles y sistemas empresariales que transforman tu visi√≥n en realidad digital."
- ctaButtons:
  * { id: "primary", label: "Comenzar Proyecto", href: "#contact", variant: "default" }
  * { id: "secondary", label: "Ver Casos", href: "#cases", variant: "outline" }
- backgroundColor: "gradient"
- textAlignment: "center"
- containerSize: "lg"
- bottomImage: [Subir imagen desde Media Library]
- bottomImageAlt: "Dashboard de software empresarial"
```

#### C. Agregar Content Sections
```json
Component: sections.content
- title: "Desarrollo Web Profesional"
- content: "Creamos aplicaciones web modernas usando las √∫ltimas tecnolog√≠as como React, Next.js y Node.js. Nuestro enfoque garantiza performance, escalabilidad y excelente experiencia de usuario."
- imagePosition: "right"
- backgroundColor: "white"
- containerSize: "lg"
- seoHeadingLevel: "h2"
- ctaButton:
  * { id: "web-cta", label: "Saber m√°s", href: "#web", variant: "default" }
```

### 3. Subir Im√°genes

1. Ve a **Media Library** ‚Üí **Upload files**
2. Sube im√°genes para:
   - **Logo de la navbar** (duxlogo.png) - Requerido para el componente navbar
   - **Hero background** - Imagen de fondo opcional para el hero
   - **Hero bottom image** - Imagen inferior que aparece debajo del contenido del hero
   - Content sections
   - OG image

**‚ö†Ô∏è Importante**: 
- Aseg√∫rate de subir la imagen `duxlogo.png` antes de configurar el componente navbar, ya que ser√° requerida.
- Para la **bottomImage** del hero, usa im√°genes con buena resoluci√≥n (m√≠nimo 1200px de ancho) que representen tu producto o servicio.

**üí° Tip para bottomImage**: 
- Recomendaciones de imagen: 1200x600px o superior
- Formatos preferidos: JPG, PNG, WebP
- Contenido sugerido: dashboard, mockup, producto, interfaz de usuario
- La imagen aparecer√° con bordes redondeados y sombra autom√°ticamente

### 4. Publicar contenido

1. **Guardar** como borrador
2. **Publicar** cuando est√© listo

## üîß Configuraci√≥n Avanzada

### 1. Configurar CORS (si es necesario)

En `config/middlewares.js`:

```javascript
module.exports = [
  'strapi::errors',
  {
    name: 'strapi::security',
    config: {
      contentSecurityPolicy: {
        useDefaults: true,
        directives: {
          'connect-src': ["'self'", 'https:'],
          'img-src': ["'self'", 'data:', 'blob:', 'res.cloudinary.com'],
          'media-src': ["'self'", 'data:', 'blob:', 'res.cloudinary.com'],
          upgradeInsecureRequests: null,
        },
      },
    },
  },
  {
    name: 'strapi::cors',
    config: {
      enabled: true,
      headers: '*',
      origin: ['http://localhost:3000', 'https://tu-dominio.com']
    }
  },
  'strapi::poweredBy',
  'strapi::logger',
  'strapi::query',
  'strapi::body',
  'strapi::session',
  'strapi::favicon',
  'strapi::public',
];
```

### 2. Variables de entorno

En tu archivo `.env` de Strapi:

```env
HOST=0.0.0.0
PORT=1337
APP_KEYS=tu_app_key_aqui
API_TOKEN_SALT=tu_api_token_salt
ADMIN_JWT_SECRET=tu_admin_jwt_secret
TRANSFER_TOKEN_SALT=tu_transfer_token_salt
JWT_SECRET=tu_jwt_secret
```

## üöÄ Despliegue de Strapi

### Opciones recomendadas:

1. **Railway** (f√°cil y econ√≥mico)
2. **Heroku** (cl√°sico, con addons)
3. **DigitalOcean** (VPS personalizable)
4. **AWS EC2** (empresarial)

### Checklist pre-deploy:

- ‚úÖ Base de datos configurada (PostgreSQL recomendado)
- ‚úÖ Variables de entorno configuradas
- ‚úÖ API tokens creados
- ‚úÖ Permisos configurados
- ‚úÖ CORS configurado para tu dominio
- ‚úÖ Contenido de prueba creado

## üîç Troubleshooting

### Error: "Component not found"
- Verifica que los componentes est√©n creados con los nombres exactos
- Revisa la categor√≠a de cada componente

### Error: "Permission denied"
- Verifica permisos en Settings ‚Üí Roles ‚Üí Public
- Confirma que find y findOne est√°n habilitados

### Error de CORS
- Agrega tu dominio a la configuraci√≥n de CORS
- Reinicia Strapi despu√©s de cambios de configuraci√≥n

### Im√°genes no cargan
- Verifica permisos de upload
- Confirma que las im√°genes est√©n publicadas
- Revisa la URL base de Strapi

## üéØ Configuraci√≥n Avanzada: Dropdowns en Navbar

### Orden de Creaci√≥n de Componentes

**‚ö†Ô∏è IMPORTANTE**: Crea los componentes en este orden espec√≠fico:

1. **ui.dropdown-item** (base)
2. **ui.dropdown-category** (usa dropdown-item)  
3. **ui.dropdown-footer-action** (independiente)
4. **ui.nav-item** (usa dropdown-category y dropdown-footer-action)
5. **layout.navbar** (usa nav-item)

### Paso a Paso: Crear Dropdown

#### 1. Crear Dropdown Item
```
Content-Type Builder ‚Üí Components ‚Üí Create new component
- Categor√≠a: ui
- Nombre: dropdown-item
- Campos como se especifica arriba
```

#### 2. Crear Dropdown Category  
```
Content-Type Builder ‚Üí Components ‚Üí Create new component
- Categor√≠a: ui
- Nombre: dropdown-category
- En campo "items": seleccionar "ui.dropdown-item"
```

#### 3. Crear Nav Item con Dropdown
```
Content-Type Builder ‚Üí Components ‚Üí Create new component
- Categor√≠a: ui  
- Nombre: nav-item
- En "dropdownCategories": seleccionar "ui.dropdown-category"
- En "dropdownFooterActions": seleccionar "ui.dropdown-footer-action"
```

#### 4. Actualizar Navbar Component
```
Content-Type Builder ‚Üí Components ‚Üí layout.navbar
- Modificar campo "navItems": debe usar "ui.nav-item" 
- Cambiar "ctaButton" a "ctaButtons" (plural)
```

### Estructura Visual del Dropdown

```
Plataforma ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CAPABILITIES    ‚îÇ GESTI√ìN Y COLABORACI√ìN ‚îÇ PRODUCTO Y CARACTER√çSTICAS ‚îÇ
‚îÇ ‚ñ° Crear APIs    ‚îÇ ‚ñ° Gesti√≥n de Contenido ‚îÇ ‚ñ° Cloud                    ‚îÇ
‚îÇ ‚ñ° Personalizar  ‚îÇ ‚ñ° Colaboraci√≥n         ‚îÇ ‚ñ° Edici√≥n Empresarial      ‚îÇ
‚îÇ ‚ñ° Hosting       ‚îÇ ‚ñ° Seguridad            ‚îÇ ‚ñ° Dux Market               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     [Contactar Ventas] [Demo Interactivo] [Alojar Proyecto]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Troubleshooting Dropdowns

#### Error: "Component not found"
- Aseg√∫rate de crear los componentes en el orden correcto
- Verifica que los nombres coincidan exactamente

#### Dropdown no aparece  
- Confirma que `hasDropdown` est√° en `true`
- Verifica que hay al menos una categor√≠a con items

#### Iconos no se muestran
- **Problema**: Nombre del √≠cono incorrecto o no existe en Lucide React
- **Soluci√≥n**: 
  - Verifica el nombre exacto en [lucide.dev](https://lucide.dev/icons)
  - Los nombres son **case-sensitive**: `Calendar` ‚úÖ, `calendar` ‚ùå
  - **Todos los iconos** de Lucide React est√°n disponibles autom√°ticamente
  - Si aparece un √≠cono de "?" significa que el nombre no existe
- **Debugging**: 
  - Revisa la consola del navegador para warnings sobre iconos no encontrados
  - Confirma que el nombre coincide exactamente con [lucide.dev](https://lucide.dev/icons)
  - Ejemplo correcto: `"Settings"`, `"Calendar"`, `"BarChart"`

#### Error HTTP 401 Unauthorized
- **Problema**: Token de autenticaci√≥n inv√°lido o expirado
- **Posibles causas**:
  - Cambiaste de servidor (localhost ‚Üí remoto) pero no actualizaste el token
  - El token expir√≥ o fue regenerado en Strapi
  - Las variables de entorno no coinciden con el servidor
- **Soluci√≥n**:
  1. **Verifica las variables en tu archivo `.env.local`:**
     ```bash
     # Servidor local
     NEXT_PUBLIC_STRAPI_URL=http://localhost:1337
     STRAPI_API_TOKEN=tu_token_local
     
     # Servidor remoto
     NEXT_PUBLIC_STRAPI_URL=https://strapidux.onrender.com
     STRAPI_API_TOKEN=tu_token_remoto
     ```
  2. **Genera un nuevo token en Strapi**:
     - Ve a: Configuraci√≥n ‚Üí API Tokens ‚Üí Crear nuevo token
     - Tipo: `Full access` (para desarrollo)
     - Copia el token completo (256 caracteres)
  3. **Reinicia el servidor de desarrollo**:
     ```bash
     npm run dev
     ```
- **Debugging**: Verifica que `preview` del token en logs coincida con tu archivo `.env.local`

#### Error HTTP 400 Bad Request - Problema con Sintaxis de Populate
- **Problema**: Query de populate con sintaxis incorrecta (especialmente v4 vs v5)
- **CAUSA PRINCIPAL**: Usar sintaxis de Strapi v4 en un servidor Strapi v5
- **S√≠ntomas**: 
  - El token es v√°lido (longitud 256, preview correcto)
  - Error: "Invalid key deep" o "Invalid populate"
  - Se muestra mock data en lugar de datos reales
- **Soluci√≥n v5**: 
  - ‚úÖ **USAR SINTAXIS CORRECTA**: Para Strapi v5, los componentes en dynamic zones **REQUIEREN** sintaxis `[on][component-name]`:
    ```
    # ‚úÖ CORRECTO para Strapi v5
    populate[dynamicZone][on][layout.navbar][populate][navItems][populate][dropdownCategories][populate][items]=true
    
    # ‚ùå INCORRECTO (sintaxis v4)
    populate[dynamicZone][populate]=*
    populate=deep
    ```
- **Sistema de fallback autom√°tico**: El c√≥digo prueba autom√°ticamente 5 niveles:
    1. **Sintaxis v5 completa** con todas las relaciones anidadas
    2. **Sintaxis v5 b√°sica** por componente 
    3. **Sintaxis v4** (fallback de compatibilidad)
    4. Sin populate
- **Debugging en logs**: Busca estos mensajes:
  ```
  üîÑ Attempt 1/5: Testing populate query
  ‚úÖ Success with populate attempt X
  ```
- **Regla fundamental**: **Strapi v5 = sintaxis [on][component-name] obligatoria**

#### Error HTTP 400 en consultas
- **Problema**: Los nombres de campos no coinciden con Strapi
- **Soluci√≥n**: Usa nombres descriptivos en lugar de "id":
  - ‚úÖ `navItemId` en lugar de `id`
  - ‚úÖ `ctaButtonId` en lugar de `id`
  - ‚úÖ `dropdownItemId` en lugar de `id`
  - ‚úÖ `categoryId` en lugar de `id`
  - ‚úÖ `footerActionId` en lugar de `id`
- **Importante**: El campo "id" est√° reservado en Strapi

## üÜï Strapi v5: Diferencias Importantes

### Sintaxis de Populate Obligatoria para Dynamic Zones

En **Strapi v5**, la forma de hacer populate de componentes anidados dentro de dynamic zones cambi√≥ completamente:

#### ‚úÖ SINTAXIS CORRECTA (v5):
```bash
# Para obtener dropdowns completos del navbar
populate[dynamicZone][on][layout.navbar][populate][navItems][populate][dropdownCategories][populate][items]=true
&populate[dynamicZone][on][layout.navbar][populate][navItems][populate][dropdownFooterActions]=true
&populate[dynamicZone][on][layout.navbar][populate][ctaButtons]=true
&populate[dynamicZone][on][layout.navbar][populate][logo]=true

# Para hero section con imagen y CTAs
&populate[dynamicZone][on][sections.hero][populate][ctaButtons]=true
&populate[dynamicZone][on][sections.hero][populate][bottomImage]=true

# Para content section
&populate[dynamicZone][on][sections.content][populate][ctaButton]=true
&populate[dynamicZone][on][sections.content][populate][image]=true
```

#### ‚ùå SINTAXIS OBSOLETA (v4):
```bash
# Estas NO funcionan en Strapi v5
populate=deep
populate[dynamicZone][populate]=*
populate=*
```

### Comportamiento de Relaciones Vac√≠as

En Strapi v5:
- ‚úÖ Puedes tener `hasDropdown: true` con relaciones vac√≠as sin errores
- ‚úÖ Las relaciones vac√≠as se retornan como `[]` (no se omiten)
- ‚úÖ No necesitas configuraci√≥n especial para relaciones repeatable
- ‚úÖ Solo define los campos como "Repeatable" en Content-Type Builder

### URL de Ejemplo Completa

```
https://tu-strapi.com/api/landing-pages?filters[slug][$eq]=landing-page
&populate[dynamicZone][on][layout.navbar][populate][navItems][populate][dropdownCategories][populate][items]=true
&populate[dynamicZone][on][layout.navbar][populate][navItems][populate][dropdownFooterActions]=true
&populate[dynamicZone][on][layout.navbar][populate][ctaButtons]=true
&populate[dynamicZone][on][layout.navbar][populate][logo]=true
&populate[dynamicZone][on][sections.hero][populate][ctaButtons]=true
&populate[dynamicZone][on][sections.hero][populate][bottomImage]=true
&populate[dynamicZone][on][sections.content][populate][ctaButton]=true
&populate[dynamicZone][on][sections.content][populate][image]=true
```

## ‚ú® Pr√≥ximos Pasos

Una vez configurado Strapi:

1. Crea m√°s landing pages para diferentes productos/servicios
2. Agrega componentes adicionales (testimonios, precios, FAQ)
3. Configura webhooks para invalidar cache
4. Implementa preview mode para editores
5. Agrega campos de analytics/tracking
6. **Configura mega men√∫s** con dropdowns personalizados

---

¬°Tu configuraci√≥n de Strapi con dropdowns est√° lista! Ahora puedes crear landing pages din√°micas con navegaci√≥n avanzada desde el panel de administraci√≥n. üéâ 